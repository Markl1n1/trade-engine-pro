# üéØ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ë–ï–ö–¢–ï–°–¢–ê –î–õ–Ø BYBIT

## ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ –ò–°–ü–†–ê–í–õ–ï–ù–´

### **1. üö® –°–û–ó–î–ê–ù BYBIT MARKET DATA FUNCTION**

**‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –°–æ–∑–¥–∞–Ω `supabase/functions/bybit-market-data/index.ts`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ Bybit (1m, 5m, 15m, 1h, 4h, 1d)
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–∞–ø–ø–∏–Ω–≥ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –¥–ª—è Bybit API
- Batch —Ä–µ–∂–∏–º –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–∞–±–ª–∏—Ü—É `market_data`

**üîß –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
```typescript
// Bybit API endpoints
const BYBIT_URLS = {
  mainnet: 'https://api.bybit.com',
  testnet: 'https://api-testnet.bybit.com'
};

// –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–∞–ø–ø–∏–Ω–≥ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
const BYBIT_INTERVALS: Record<string, string> = {
  '1m': '1', '5m': '5', '15m': '15',
  '1h': '60', '4h': '240', '1d': 'D'
};
```

### **2. üö® –û–ë–ù–û–í–õ–ï–ù–´ –§–û–†–ú–£–õ–´ –î–õ–Ø BYBIT**

**‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `exchangeType` –≤ `BacktestConfig`
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–π –±–∏—Ä–∂–∏
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏ –¥–ª—è Bybit vs Binance

**üîß Bybit –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
```typescript
if (config.exchangeType === 'bybit') {
  this.stepSize = 0.01;      // Bybit step size
  this.minQty = 0.001;       // Bybit minimum quantity
  this.minNotional = 5;       // Bybit minimum notional
} else {
  this.stepSize = 0.00001;    // Binance step size
  this.minQty = 0.001;        // Binance minimum quantity
  this.minNotional = 10;      // Binance minimum notional
}
```

**üîß Bybit –∫–æ–º–∏—Å—Å–∏–∏:**
```typescript
if (exchangeType === 'bybit') {
  // Bybit fees: 0.01% maker, 0.06% taker
  exchangeMakerFee = 0.01;
  exchangeTakerFee = 0.06;
} else {
  // Binance fees: 0.02% maker, 0.04% taker
  exchangeMakerFee = 0.02;
  exchangeTakerFee = 0.04;
}
```

### **3. üö® –û–ë–ù–û–í–õ–ï–ù RUN-BACKTEST**

**‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –±–∏—Ä–∂–∏ –∏–∑ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∫–æ–º–∏—Å—Å–∏–π –¥–ª—è –∫–∞–∂–¥–æ–π –±–∏—Ä–∂–∏
- –ü–µ—Ä–µ–¥–∞—á–∞ `exchangeType` –≤ –±–µ–∫—Ç–µ—Å—Ç –¥–≤–∏–∂–æ–∫

**üîß –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:**
```typescript
// –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –±–∏—Ä–∂–∏ –∏–∑ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
const exchangeType = strategy.exchange_type || 'binance';

// –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏
const backtestConfig = {
  // ... –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  makerFee: exchangeMakerFee,    // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏
  takerFee: exchangeTakerFee,    // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏
  exchangeType: exchangeType     // –¢–∏–ø –±–∏—Ä–∂–∏
};
```

### **4. üö® –û–ë–ù–û–í–õ–ï–ù BACKTEST ENGINE**

**‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–π –±–∏—Ä–∂–∏
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–π –¥–ª—è –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞
- –£—á–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏ Bybit –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö

**üîß –ö–æ–º–∏—Å—Å–∏–∏ –¥–ª—è –≤—Ö–æ–¥–∞:**
```typescript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: Calculate entry fee based on exchange type
let entryFee: number;
if (this.config.exchangeType === 'bybit') {
  // Bybit fees: 0.01% maker, 0.06% taker
  entryFee = actualNotional * (this.config.takerFee / 100);
} else {
  // Binance fees: 0.02% maker, 0.04% taker
  entryFee = actualNotional * (this.config.takerFee / 100);
}
```

**üîß –ö–æ–º–∏—Å—Å–∏–∏ –¥–ª—è –≤—ã—Ö–æ–¥–∞:**
```typescript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: Calculate exit fee based on exchange type
let exitFee: number;
if (this.config.exchangeType === 'bybit') {
  // Bybit fees: 0.01% maker, 0.06% taker
  exitFee = exitNotional * (this.config.takerFee / 100);
} else {
  // Binance fees: 0.02% maker, 0.04% taker
  exitFee = exitNotional * (this.config.takerFee / 100);
}
```

## üìä –°–†–ê–í–ù–ï–ù–ò–ï BINANCE VS BYBIT

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Binance | Bybit | –°—Ç–∞—Ç—É—Å |
|----------|---------|-------|--------|
| **Step Size** | 0.00001 | 0.01 | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| **Min Quantity** | 0.001 | 0.001 | ‚úÖ –û–¥–∏–Ω–∞–∫–æ–≤–æ |
| **Min Notional** | 10 | 5 | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| **Maker Fee** | 0.02% | 0.01% | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| **Taker Fee** | 0.04% | 0.06% | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| **API Endpoint** | Binance API | Bybit API | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| **Data Source** | Binance | Bybit | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### **‚úÖ –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û:**

1. **‚úÖ –°–æ–∑–¥–∞–Ω Bybit Market Data Function**
   - –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å Bybit API
   - –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–∞–ø–ø–∏–Ω–≥ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
   - Batch —Ä–µ–∂–∏–º –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤

2. **‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ–æ—Ä–º—É–ª—ã –±–µ–∫—Ç–µ—Å—Ç–∞**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `exchangeType` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–π –±–∏—Ä–∂–∏
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏ –¥–ª—è Bybit

3. **‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω run-backtest**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –±–∏—Ä–∂–∏
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∫–æ–º–∏—Å—Å–∏–π
   - –ü–µ—Ä–µ–¥–∞—á–∞ —Ç–∏–ø–∞ –±–∏—Ä–∂–∏ –≤ –¥–≤–∏–∂–æ–∫

4. **‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω Backtest Engine**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–π
   - –£—á–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏ Bybit

### **üöÄ –¢–ï–ü–ï–†–¨ –ë–ï–ö–¢–ï–°–¢ –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û:**

- ‚úÖ **–ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ Bybit** –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã** –¥–ª—è Bybit
- ‚úÖ **–£—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∏—Å—Å–∏–∏ Bybit** (0.01%/0.06%)
- ‚úÖ **–ü—Ä–∏–º–µ–Ω—è–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Bybit** (step size, min qty)
- ‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–∏–º—É–ª–∏—Ä—É–µ—Ç** —Ä–µ–∞–ª—å–Ω—É—é —Ç–æ—Ä–≥–æ–≤–ª—é –Ω–∞ Bybit

### **üìà –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´:**

1. **–ù—É–ª–µ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã** - —Ç–µ–ø–µ—Ä—å –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ Bybit
2. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã** - —Ñ–æ—Ä–º—É–ª—ã –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è Bybit
3. **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** - —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
4. **–¢–æ—á–Ω–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** - –±–µ–∫—Ç–µ—Å—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ –Ω–∞ Bybit

## üéØ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –±–µ–∫—Ç–µ—Å—Ç–æ–º –¥–ª—è Bybit –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!** 

- ‚úÖ –°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö Bybit
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ —Ñ–æ—Ä–º—É–ª—ã –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å Bybit
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏ Bybit (–∫–æ–º–∏—Å—Å–∏–∏, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)
- ‚úÖ –ë–µ–∫—Ç–µ—Å—Ç —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ Bybit

**–ë–µ–∫—Ç–µ—Å—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å –¥–∞–Ω–Ω—ã–º–∏ Bybit!** üöÄ
